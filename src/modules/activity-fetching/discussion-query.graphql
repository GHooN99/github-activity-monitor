query GetDiscussionsAndComments(
  $owner: String!
  $name: String!
  $discCount: Int!
  $commCount: Int!
) {
  repository(owner: $owner, name: $name) {
    discussions(first: $discCount, orderBy: { field: CREATED_AT, direction: DESC }) {
      nodes {
        ...DiscussionNode

        comments(last: $commCount, orderBy: { field: UPDATED_AT, direction: DESC }) {
          nodes {
            ...CommentNode
          }
        }
      }
    }
  }
}

fragment DiscussionNode on Discussion {
  id
  title
  url
  createdAt
  author {
    login
  }
}

fragment CommentNode on Comment {
  id
  createdAt
  author {
    login
  }
  bodyText
  url
}
